module(rechercheJouet;referenceJouet, jouets,nbJouets;iJouet,estTrouve)
---*
estTrouve = false
borneInf = 0
borneSup = nbJouets - 1

iMilieu = [(borneInf + borneSup)/2]ENT

while(borneInf <= borneSup AND jouets[iMilieu].reference != referenceJouet)
  if(referenceRecherche < jouets[iMilieu].reference)
      borneSup = iMilieu - 1
  else
      borneInf = iMilieu + 1
  endif

  iMilieu = [(borneInf + borneSup)/2]ENT
endwhile
iJouet = iMilieu
if(borneInf < borneSup)
   estTrouve = true
endif
------
 
module(rechercheJouet;jouets, nbJouets, reference;iReference, existe)
---*
iReference = 0
while (iReference < nbJouets && jouets[iReference].reference < reference)
  iReference++
endwhile
existe = iReference < nbJouets && jouets[iReference].reference ==reference)

------

module(rechercheMatériauJouet;jouets,nbJouets,referenceJouet,libelléMatériau;iJouet,iMatériau)
---*
module(rechercheJouet;jouets, nbJouets, reference;iJouet, existe)
if(existe)
iMatériau = 0
while(iMatériau < 5 AND nomMatériau != jouets[iJouet].matériaux[iMatériau])
iMatériau++
endwhile
endif
------

 module(fiche;;ficheJouet,ficheExiste)
---*
Obtenir ficheJouet.reference
ficheExiste = ficheJouet.reference ≠ "XXX"
if(ficheExiste)
Obtenir ficheJouet.nom
Obtenir ficheJouet.prix
Obtenir ficheJouet.nbStock
i = 0
Obtenir libMateriau
while (i < 5 AND libMateriau != "ZZZ")
ficheJouet.matériaux[i]=libMateriau
Obtenir libMateriau
i++
endwhile
------
// Est il autorisé de passé une fiche en paramètre ??

module(AjouterOuModifierJouet;jouets,iJouet,nbMateriaux,fiche;jouets)
 
---*
jouets[iJouet].reference = fiche.reference
jouets[iJouet].nom = fiche.nom
jouets[iJouet].prix = fiche.prix
iMateriel = 0
while(iMateriel < nbMateriaux)
  jouets[iJouet].materiaux[iMateriel] = fiche.materiaux[iMateriel]
iMateriel++
endwhile
------

module(decalageJouets;jouets,iJouetNouv,nbJouets;jouets,nbJouets)
---*
iJouet = nbJouets
while(iJouet > iJouetNouv)
  jouets[iJouet] = jouets[iJouet - 1]
  iJouet--
endwhile
nbJouets++
------

module(supprimerJouet;jouets,nbJouets,iJouet;jouets,nbJouets)
---*
while(iJouet < nbJouets - 1)
  jouets[iJouet] = jouets[iJouet - 1]
  iJouet++
endwhile
nbJouets--
------

module(miseAJourJouets;jouets,nbJouets;jouets,nbJouets)
---*
module(fiche;;ficheJouet,ficheExiste)
while (ficheExiste)
module(rechercheJouet;jouets, nbJouets, ficheJouet.reference;iJouet, estTrouve)
if(estTrouve)
 obtenir choix
 if(choix == 1)
    module(ajouterOuModifierJouets;jouets,iJouet,nbMateriaux,fiche;jouets)
 else
    module(supprimerJouet;jouets,nbJouets,iJouet;jouets,nbJouets)
 endif
else
module(decalageJouets;jouets,iJouet,nbJouets;jouets,nbJouets)
module(AjouterOuModifierJouet;jouets,iJouet,nbMateriaux,fiche;jouets)
endwhile
endif
module(fiche;;ficheJouet,ficheExiste)
endwhile
------